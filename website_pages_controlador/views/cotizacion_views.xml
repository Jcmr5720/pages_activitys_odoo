<odoo>
    <record id="view_website_constructor_cotizacion_tree" model="ir.ui.view">
        <field name="name">website.constructor.cotizacion.tree</field>
        <field name="model">website.constructor.cotizacion</field>
        <field name="arch" type="xml">
            <tree string="Cotizaciones">
                <field name="usuario"/>
                <field name="telefono"/>
                <field name="total"/>
                <field name="fecha"/>
                <field name="state"/>
            </tree>
        </field>
    </record>

    <record id="view_website_constructor_cotizacion_form" model="ir.ui.view">
        <field name="name">website.constructor.cotizacion.form</field>
        <field name="model">website.constructor.cotizacion</field>
        <field name="arch" type="xml">
            <form string="Cotización">
                <header>
                    <button name="action_open_assign_wizard" string="Asignar vendedor" type="object" class="btn-primary" attrs="{'invisible': [('state', '=', 'asignado')]}"/>
                    <button name="action_open_create_client" string="Asignar cliente" type="object" class="btn-primary" attrs="{'invisible': ['|', ('is_public','=',False), ('partner_id','!=',False)]}"/>
                    <button name="action_open_client_form" string="Ver cliente" type="object" class="btn-secondary" attrs="{'invisible': [('partner_id','=',False)]}"/>
                    <button name="action_process_sale_order" string="Procesar" type="object" class="btn-secondary" attrs="{'invisible': ['|', '|', ('sale_order_id','!=',False), ('partner_id','=',False), ('assigned_user_id','=',False)]}"/>
                    <button name="action_open_whatsapp_wizard" string="Contactar" type="object" class="oe_highlight"/>
                </header>
                <sheet>
                    <group col="2">
                        <label for="usuario" string="Cliente asignado:" attrs="{'invisible': [('is_public','=',False)]}"/>
                        <field name="usuario" nolabel="1" attrs="{'invisible': [('is_public','=',False)], 'readonly': [('partner_id','!=',False)]}"/>
                        <label for="partner_id" string="Cliente asignado:" attrs="{'invisible': [('is_public','=',True)]}"/>
                        <field name="partner_id" readonly="1" nolabel="1" attrs="{'invisible': [('is_public','=',True)]}" options="{'no_open': True, 'no_create': True, 'no_quick_create': True, 'no_create_edit': True}"/>
                        <label for="telefono" string="Teléfono:"/>
                        <field name="telefono" nolabel="1"/>
                        <label for="fecha" string="Fecha creación:"/>
                        <field name="fecha" nolabel="1"/>
                        <label for="state" string="Estado:"/>
                        <field name="state" readonly="1" nolabel="1"/>
                        <label for="producto_ids" string="Productos:" colspan="2"/>
                        <field name="producto_ids" nolabel="1" options="{'no_open': True}" colspan="2">
                            <tree>
                                <field name="name"/>
                                <field name="qty_available" string="Cantidad disponible" readonly="1"/>
                                <field name="list_price"/>
                            </tree>
                        </field>
                        <label for="productos_sin_stock_ids" string="Productos sin stock:" colspan="2" attrs="{'invisible': [('productos_sin_stock_ids','=',False)]}"/>
                        <field name="productos_sin_stock_ids" nolabel="1" colspan="2" attrs="{'invisible': [('productos_sin_stock_ids','=',False)]}" class="oe_inline" style="text-align: left;">
                            <tree create="0" edit="0">
                                <field name="name"/>
                                <field name="qty_available" string="Cantidad disponible" readonly="1"/>
                            </tree>
                        </field>
                        <label for="total" string="Precio total:" style="font-size: 18px; font-weight: bold;"/>
                        <field name="total" nolabel="1" readonly="1" style="font-size: 18px; font-weight: bold;"/>
                        <label for="assigned_user_id" string="Asignado a:"/>
                        <field name="assigned_user_id" readonly="1" nolabel="1"/>
                        <label for="sale_order_id" string="Cotización:" attrs="{'invisible': [('sale_order_id','=',False)]}" style="font-size: 16px; font-weight: bold;"/>
                        <field name="sale_order_id" readonly="1" nolabel="1" attrs="{'invisible': [('sale_order_id','=',False)]}" style="font-size: 16px; font-weight: bold;"/>
                    </group>
                    <field name="is_public" invisible="1"/>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>
</odoo>
